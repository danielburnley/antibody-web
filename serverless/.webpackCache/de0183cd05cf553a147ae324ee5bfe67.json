{"remainingRequest":"/home/barnaby/code/antibody-web/serverless/node_modules/babel-loader/lib/index.js!/home/barnaby/code/antibody-web/serverless/api/validate.ts","dependencies":[{"path":"/home/barnaby/code/antibody-web/serverless/api/validate.ts","mtime":1591170823796},{"path":"/home/barnaby/code/antibody-web/serverless/.babelrc","mtime":1591182054525},{"path":"/home/barnaby/code/antibody-web/serverless/node_modules/cache-loader/dist/cjs.js","mtime":1591181641368},{"path":"/home/barnaby/code/antibody-web/serverless/node_modules/babel-loader/lib/index.js","mtime":1590479556893}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEpvaSBmcm9tICdAaGFwaS9qb2knOwpleHBvcnQgY29uc3QgdmFsaWRhdGVHZW5lcmF0ZVJlcXVlc3QgPSBib2R5ID0+IHsKICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KHt9KTsgLy8gV2UgaGF2ZSByZW1vdmVkIHRoZSBndWlkIGZyb20gaGVyZSBhcyB3ZSBtb3JlIGNsb3NlbHkgYXBwcm94aW1hdGUgcmVhbCBqd3QgZmxvdyBub3cKCiAgcmV0dXJuIHNjaGVtYS52YWxpZGF0ZShib2R5KTsKfTsKZXhwb3J0IGNvbnN0IHZhbGlkYXRlR2VuZXJhdGVFbnZpcm9ubWVudCA9IGVudmlyb25tZW50ID0+IHsKICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KHsKICAgIFVQTE9BRF9CVUNLRVQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLAogICAgRFlOQU1PX1RBQkxFOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKQogIH0pOwogIHJldHVybiBzY2hlbWEudmFsaWRhdGUoZW52aXJvbm1lbnQsIHsKICAgIGFsbG93VW5rbm93bjogdHJ1ZQogIH0pOwp9OwpleHBvcnQgY29uc3QgdmFsaWRhdGVVcGRhdGVSZXF1ZXN0ID0gYm9keSA9PiB7CiAgY29uc3Qgc2NoZW1hID0gSm9pLm9iamVjdCh7CiAgICB0ZXN0UmVjb3JkOiBKb2kub2JqZWN0KCkucmVxdWlyZWQoKQogIH0pOwogIHJldHVybiBzY2hlbWEudmFsaWRhdGUoYm9keSk7Cn07CmV4cG9ydCBjb25zdCB2YWxpZGF0ZVVwZGF0ZUVudmlyb25tZW50ID0gZW52aXJvbm1lbnQgPT4gewogIGNvbnN0IHNjaGVtYSA9IEpvaS5vYmplY3QoewogICAgRFlOQU1PX1RBQkxFOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKQogIH0pOwogIHJldHVybiBzY2hlbWEudmFsaWRhdGUoZW52aXJvbm1lbnQsIHsKICAgIGFsbG93VW5rbm93bjogdHJ1ZQogIH0pOwp9Ow=="},{"version":3,"sources":["/home/barnaby/code/antibody-web/serverless/api/validate.ts"],"names":["Joi","validateGenerateRequest","body","schema","object","validate","validateGenerateEnvironment","environment","UPLOAD_BUCKET","string","required","DYNAMO_TABLE","allowUnknown","validateUpdateRequest","testRecord","validateUpdateEnvironment"],"mappings":"AAAA,OAAOA,GAAP,MAAkC,WAAlC;AAEA,OAAO,MAAMC,uBAAuB,GAAIC,IAAD,IAAe;AACpD,QAAMC,MAAoB,GAAGH,GAAG,CAACI,MAAJ,CAAW,EAAX,CAA7B,CADoD,CAIpD;;AACA,SAAOD,MAAM,CAACE,QAAP,CAAgBH,IAAhB,CAAP;AACD,CANM;AAQP,OAAO,MAAMI,2BAA2B,GAAIC,WAAD,IAAsB;AAE/D,QAAMJ,MAAoB,GAAGH,GAAG,CAACI,MAAJ,CAAW;AACtCI,IAAAA,aAAa,EAAER,GAAG,CAACS,MAAJ,GAAaC,QAAb,EADuB;AAEtCC,IAAAA,YAAY,EAAEX,GAAG,CAACS,MAAJ,GAAaC,QAAb;AAFwB,GAAX,CAA7B;AAKA,SAAOP,MAAM,CAACE,QAAP,CAAgBE,WAAhB,EAA6B;AAAEK,IAAAA,YAAY,EAAE;AAAhB,GAA7B,CAAP;AACD,CARM;AAWP,OAAO,MAAMC,qBAAqB,GAAIX,IAAD,IAAe;AAClD,QAAMC,MAAoB,GAAGH,GAAG,CAACI,MAAJ,CAAW;AACtCU,IAAAA,UAAU,EAAEd,GAAG,CAACI,MAAJ,GAAaM,QAAb;AAD0B,GAAX,CAA7B;AAIA,SAAOP,MAAM,CAACE,QAAP,CAAgBH,IAAhB,CAAP;AACD,CANM;AAQP,OAAO,MAAMa,yBAAyB,GAAIR,WAAD,IAAsB;AAE7D,QAAMJ,MAAoB,GAAGH,GAAG,CAACI,MAAJ,CAAW;AACtCO,IAAAA,YAAY,EAAEX,GAAG,CAACS,MAAJ,GAAaC,QAAb;AADwB,GAAX,CAA7B;AAIA,SAAOP,MAAM,CAACE,QAAP,CAAgBE,WAAhB,EAA6B;AAAEK,IAAAA,YAAY,EAAE;AAAhB,GAA7B,CAAP;AACD,CAPM","sourcesContent":["import Joi, { ObjectSchema } from '@hapi/joi';\n\nexport const validateGenerateRequest = (body: any) => {\n  const schema: ObjectSchema = Joi.object({\n  });\n\n  // We have removed the guid from here as we more closely approximate real jwt flow now\n  return schema.validate(body);\n};\n\nexport const validateGenerateEnvironment = (environment: any) => {\n    \n  const schema: ObjectSchema = Joi.object({\n    UPLOAD_BUCKET: Joi.string().required(),\n    DYNAMO_TABLE: Joi.string().required()\n  });\n\n  return schema.validate(environment, { allowUnknown: true });\n};\n\n\nexport const validateUpdateRequest = (body: any) => {\n  const schema: ObjectSchema = Joi.object({\n    testRecord: Joi.object().required()\n  });\n\n  return schema.validate(body);\n};\n\nexport const validateUpdateEnvironment = (environment: any) => {\n    \n  const schema: ObjectSchema = Joi.object({\n    DYNAMO_TABLE: Joi.string().required()\n  });\n\n  return schema.validate(environment, { allowUnknown: true });\n};"]}]}